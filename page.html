<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Inflation Calculator</title>
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
</head>
<style>
    .number-image {
        position: relative;
    }

    .number-image::after {
        content: "1111111111111";
        display: block;
        position: absolute;
        top: 20px;
        left: 300px;
        font-size: 40px;
        color: rgb(197, 11, 11);
        background-color: black;
        padding: 5px;
        border-radius: 50%;
    }
</style>

<body>

    <div>

        <div><span style="text-align: center;font-size: 20px;">Inflation Calculator</span></div>
        <table style="width: 100%;font-size: 18px;" border="0" cellspacing="0">
            <tr style="text-align: left;height: 100px;background-color: #cdd2dd;">
                <td>How much ￡<input type="text" id="pound" value="" />in<select id="yearSelect">
                        <option value="">Select year</option>
                    </select> is worth in<select id="targetyearSelect">
                        <option value="">Select target year</option>
                    </select><button onclick="calculateInflation()" style="width: 100px;height: 40px;">Go</button></td>
            </tr>

            <tr style="text-align: left;height: 100px;background-color: #eee8ed;">
                <td>France<input type="text" readonly="true" id="France" value="" />£
                    Italy<input type="text" readonly="true" id="Italy" value="" />£
                    UK<input type="text" readonly="true" id="UK" value="" />£
                    Germany <input type="text" readonly="true" id="Germany" value="" />£</td>
            </tr>
            <tr>
                <td>

                    <div style="height: 90%;">
                        <img src="map.jpg" class="number-image">
                        <div style="position:absolute; z-index:2; left:200px; top:550px;">
                            <strong> <span id="newuk" style="color: rgb(3, 31, 56);"></span></strong>
                        </div>

                        <div style="position:absolute; z-index:2; left:250px; top:700px;">
                            <strong> <span id="newFrance" style="color: rgb(3, 31, 56);"></span></strong>
                        </div>


                        <div style="position:absolute; z-index:2; left:400px; top:750px;">
                            <strong> <span id="newItaly" style="color: rgb(3, 31, 56);"></span></strong>
                        </div>

                        <div style="position:absolute; z-index:2; left:400px; top:600px;">
                            <strong> <span id="newGermany" style="color: rgb(3, 31, 56);"></span></strong>
                        </div>
                    </div>
                </td>
            </tr>
        </table>
    </div>

    <script>

        var yearSelect = document.getElementById("yearSelect");
        var targetyearSelect = document.getElementById("targetyearSelect");

        for (var year = 1960; year <= 2022; year++) {
            var option = document.createElement("option");
            option.value = year;
            option.text = year;
            yearSelect.appendChild(option);
        }
        for (var year = 1960; year <= 2022; year++) {
            var option = document.createElement("option");
            option.value = year;
            option.text = year;
            targetyearSelect.appendChild(option);
        }

        function calculateInflation() {

            var oOpt = document.getElementById('yearSelect');
            var year1 = oOpt.options[oOpt.selectedIndex].value;

            var oOpt1 = document.getElementById('targetyearSelect');
            var year2 = oOpt1.options[oOpt1.selectedIndex].value;

            var pound = document.getElementById('pound').value;
            console.log(pound)

            var France = 0.00;
            var Italy = 0.00;
            var UK = 0.00;
            var Germany = 0.00;

            if (pound == "") {
                alert("Please enter the amount in pounds");
                return;
            }
            $(function () {
                $.ajax({
                    url: "http://127.0.0.1:8080/env/getmultiplier",
                    type: "POST",
                    data: {},
                    contentType: false,
                    processData: false,
                    contextType: "application/json;charset=utf-8",
                    success: function (res) {

                        var jsonnew = JSON.parse(res);

                        var datalist = jsonnew.data;
                        for (var index in datalist) {

                            var jsonchild = datalist[index];

                            if (jsonchild.country == "France" && jsonchild.year == year1) {

                                France = pound / jsonchild.multiplier;
                                console.log(France, "France1")
                            }
                            if (jsonchild.country == "Italy" && jsonchild.year == year1) {

                                Italy = pound / jsonchild.multiplier;
                            }
                            if (jsonchild.country == "UK" && jsonchild.year == year1) {

                                UK = pound / jsonchild.multiplier;
                            }
                            if (jsonchild.country == "Germany" && jsonchild.year == year1) {

                                Germany = pound / jsonchild.multiplier;
                            }



                            if (jsonchild.country == "France" && jsonchild.year == year2) {

                                France = France * jsonchild.multiplier;

                            }
                            if (jsonchild.country == "Italy" && jsonchild.year == year2) {

                                Italy = Italy * jsonchild.multiplier;
                            }
                            if (jsonchild.country == "UK" && jsonchild.year == year2) {

                                UK = UK * jsonchild.multiplier;
                            }
                            if (jsonchild.country == "Germany" && jsonchild.year == year2) {

                                Germany = Germany * jsonchild.multiplier;
                            }
                        }

                        //Output the calculated value to the page
                        document.getElementById('Germany').value = Germany.toFixed(2);
                        document.getElementById('France').value = France.toFixed(2);
                        document.getElementById('Italy').value = Italy.toFixed(2);
                        document.getElementById('UK').value = UK.toFixed(2);

                        //Show results to the map
                        document.getElementById('newuk').innerText = UK.toFixed(2);
                        document.getElementById('newGermany').innerText = Germany.toFixed(2);
                        document.getElementById('newFrance').innerText = France.toFixed(2);
                        document.getElementById('newItaly').innerText = Italy.toFixed(2);




                    },
                    error: function (err) {
                        console.log(err)
                    }
                });
            })
        }

    </script>
</body>

</html>